# mpeg2-demuxer
Утилита компаньон для Walrus для тестирования демукса .PSS фидео формата.
Расчленяет видео файл на отдельные фреймы и группирует однотипные, аудио к аудио, видео к видео

.PSS формат сжимается архиватором 7z в районе 60% от оригинального размера
(на самом деле, после нескольких тестов стало понятно, что всё зависит от игры и видео может не пожаться вовсе (что и логично), из чего следует, что реальная польза может возникнуть только при дедупликации образов разных регионов)

демукс позволяет сэкономить ещё несколько процентов

Для того, чтобы размуксить .PSS файл, обращусь к его формату:

.PSS файл состоит из фреймов, каждый фрейм имеет заголовок, который определяет тип данных, содержащихся во фрейме.

# Заголовки фреймов

В .PSS файлах встречаются следующие заголовки, каждый длиною в 4 байта:

- 0x00 0x00 0x01 0xB9 - после этого заголовока данных нет, это маркер конца файла
- 0x00 0x00 0x01 0xBA - это заголовок начала кластера, состоящего из фреймов, за ним следуют 10 байт, содержание которых не принципиально для демукса
- 0x00 0x00 0x01 0xBB - как правило, следует за маркером 0x00 0x00 0x01 0xBA, за заголовком следуют два байта (big-endian), обозначающих длину данных фрейма
- 0x00 0x00 0x01 0xBD - заголовок аудио фрейма, за которым следуют два байта (big-endian), длина данных фрейма
- 0x00 0x00 0x01 0xBE - заголовок пад фрейма, он состоит из значений равным 0xFF, за заголовком следуют два байта (big-endian), длина пада
- 0x00 0x00 0x01 0xEO - заголовок видео фрейма, за которым следуют два байта (big-endian), длина данных фрейма

Полная длина фрейма считается: [длина заголовка] + [длина длины фрейма] + [длина фрейма]
